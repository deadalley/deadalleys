{{ define "main" }}
{{ partial "page-header.html" . }}

<section class="py-12">
  <div class="container mx-auto px-6 relative z-10">
    {{ $folder := .Params.imagekit_folder }}
    {{ $baseURL := "https://ik.imagekit.io/deadalley31" }}
    {{ $thumbnailTransform := "?tr=w-400,h-300,c-maintain_ratio" }}
    {{ $fullTransform := "?tr=w-1200,h-900,c-maintain_ratio" }}

    {{ if $folder }}
    {{/* Dynamic ImageKit folder approach - load via JavaScript */}}
    <div id="loading-message" class="text-center text-white">
      <div class="loading-spinner"></div>
      <p>Loading gallery...</p>
    </div>
    {{ end }}
    <div class="gallery-grid">
    </div>

    {{ if $folder }}
    <script>
      // Gallery configuration
      window.galleryConfig = {
        folder: '{{ $folder }}',
        baseURL: '{{ $baseURL }}',
        thumbnailTransform: '{{ $thumbnailTransform }}',
        fullTransform: '{{ $fullTransform }}',
        apiKey: ''
      };
    </script>
    <script src="{{ "js/imagekit-gallery.js" | relURL }}"></script>
    {{ end }}
</section>
{{ end }}